<import src="/zanui/stepper/index.wxml"/>

<view class="container">
    <view class="navbar">
        <view class="zan-row" style="height: 100%;">
            <view class="zan-col zan-col-8 navcell">
                <view class='nav-item nav-item-on'>
                    <navigator url="/pages/ProductManagement/Selling/Selling" open-type='redirect'
                               hover-class="navigator-hover">
                        出货
                    </navigator>
                </view>
            </view>
            <view class="zan-col zan-col-8 navcell">
                <view class='nav-item'>
                    <navigator url="/pages/ProductManagement/Purchase/Purchase" open-type='redirect'
                               hover-class="navigator-hover">
                        采购/入库
                    </navigator>
                </view>
            </view>
            <view class="zan-col zan-col-8 navcell">
                <view class='nav-item'>
                    <navigator url="/pages/ProductManagement/ProductInfo/ProductInfo" open-type='redirect'
                               hover-class="navigator-hover">
                        库存信息
                    </navigator>
                </view>
            </view>
        </view>
    </view>
    <view class='container' style='padding-bottom:120rpx; padding-top:100rpx'>
        <view class='zan-row' style='width:100%; display:flex'>
            <view class="doc-title zan-hairline--bottom">出货列表</view>
            <button class="addBtn" catchtap='addShipmentItem' hover-class='addBtnHover'>+</button>
        </view>
        <view class='container' style="background:#fff;border:0 solid #e5e5e5">
            <view class="zan-panel" wx:for="{{cartItems}}" wx:key="id" wx:for-item="item" wx:for-index="index">
                <view class="zan-card" id="{{item.id}}" bindtouchstart="touchS" bindtouchmove="touchM"
                      bindtouchend="touchE" style="left:{{item.left + 'rpx'}}" data-index="{{index}}">
                    <view class="zan-card__thumb" style='background:#d8d8d8'>
                        <image class="zan-card__img" src='{{item.imageURL}}' mode='aspectFit'></image>
                    </view>
                    <view class="zan-card__detail" style="padding-left:10px">
                        <view class="zan-card__detail-row" style="margin-bottom:20px;font-size:18px">
                            <view class="zan-card__right-col" style='color:#e64340; font-weight:bold;'>¥
                                {{item.priceForSale}}
                            </view>
                            <view class="zan-card__left-col zan-ellipsis--l2">
                                {{item.name}}
                            </view>
                        </view>
                        <view class="zan-card__detail-row zan-c-gray-darker" style="margin-bottom:10px">
                            <view class="zan-card__left-col">
                                商品编号： {{item.id}}
                            </view>
                        </view>
                        <view class="zan-card__detail-row zan-c-gray-darker">
                            <view class="zan-card__right-col">
                                <template is="zan-stepper"
                                          data="{{ stepper: item.count ,min: 1,max: item.stock, componentId: index }}"/>
                            </view>
                            <view class="zan-card__left-col" style="margin-top:5px">
                                剩余{{item.stock}}件
                            </view>
                        </view>
                    </view>
                </view>
                <view class="del-wrapper">
                    <view class="delete-btn" data-index="{{index}}" catchtap="delItem">
                        删除
                    </view>
                </view>

            </view>
        </view>

    </view>

    <view class="billingBox">
        <view class="left-price">
            <text style='font-weight:bold;font-size:36rpx;margin-right:30px;color:#5b5b5b;line-height:120rpx;'>合计:</text>¥ {{totalPrice}}
        </view>
        <view class="to-pay-btn" bindtap="toPayOrder">立即开单</view>
    </view>
</view>